{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\nexport const createGalleryCardTemple = images=> {\n    return images\n        .map(\n            ({ webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads }) =>\n                    \n        `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n        <div class = \"img-card\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          <div class=\"img-info\">\n            <p class=\"img-info-item\">Likes<span>${likes}</span></p>\n            <p class=\"img-info-item\">Views<span>${views}</span></p>\n            <p class=\"img-info-item\">Comments<span>${comments}</span></p>\n            <p class=\"img-info-item\">Downloads<span>${downloads}</span></p>\n          </div>\n          </div>\n        </a>`\n        )\n        .join('');\n    \n}\n\n\n\n","import axios from 'axios';\n\nexport class UnsplashAPI {\n  #API_KEY = '48239935-17beded8a236fb1397b75b1c0';\n  #BASE_URL = 'https://pixabay.com/api/';\n  #query = '';\n\n  async fetchPhotos( query, currentPage ) {\n  const url = `${this.#BASE_URL}?key=${this.#API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=15`;\n\n    try {\n      const { data } = await axios.get(url);\n      return data;\n  \n} \n    catch(error) {\n      console.error('Error fetching images;', error); \n    throw error;\n\n  }\n  \n}\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n  \n   get query() {\n    return this.#query;\n  }\n}\n \n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n import { createGalleryCardTemple } from './js/render-functions';\n import { UnsplashAPI } from \"./js/pixabay-api\";\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst load = document.querySelector('.load');\ndocument.addEventListener('DOMContentLoaded', () => {\n  load.style.display = 'none'; \n});\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\n\nconst api = new UnsplashAPI();\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet lightbox;\n\n\nasync function onSearch(event) {\n  try {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    load.style.display = 'block';\n    currentPage = 1;\n    loadMoreButton.style.display = 'none';\n    const query = input.value.trim();\n    currentQuery = query;\n  \n    if (query === '') {\n         load.style.display = 'none';\n        iziToast.warning({\n      title: 'Warning',\n            message: 'Please enter a search query!',\n    });\n    return;\n    }\n\n    loadMoreButton.classList.add('is-hidden');\n    const data = await api.fetchPhotos(query, currentPage);\n    load.style.display = 'none';\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.error({\n      title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return; \n    }\n\n\n    gallery.insertAdjacentHTML('beforeend', createGalleryCardTemple(data.hits));\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery-item', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh(); \n    }\n    iziToast.success({\n      title: 'Success',\n      message: `Found ${data.totalHits} images!`,\n    })\n    \n      if (data.totalHits > currentPage *15) {\n      loadMoreButton.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load images. Please try again later.',\n    });\n  } finally {\n    form.reset();\n  }\n}     \n\nasync function onLoadMore() {\n  currentPage += 1;\n\n  try {\n     load.style.display = 'block'; \n    const data = await api.fetchPhotos(currentQuery, currentPage);\n    if (data.hits && data.hits.length > 0) {\n      renderGallery(data.hits);\n\n   \n      if (currentPage * 15 >= data.totalHits) {\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreButton.style.display = 'none';\n      }\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: 'No more images found.',\n      });\n    }\n  }  catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  }finally {\n    load.style.display = 'none';  \n  }\n}\n\nfunction renderGallery(images) {\n  const markup = createGalleryCardTemple(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-item', \n      {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n\n\n  const { height: cardHeight } = gallery\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n\nform.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\n"],"names":["createGalleryCardTemple","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","UnsplashAPI","__privateAdd","_API_KEY","_BASE_URL","_query","query","currentPage","url","__privateGet","data","axios","error","newQuery","__privateSet","form","input","gallery","load","loadMoreButton","api","currentQuery","lightbox","onSearch","event","iziToast","SimpleLightbox","onLoadMore","renderGallery","markup","cardHeight"],"mappings":"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"}